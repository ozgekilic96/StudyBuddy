<%= render "shared/navbar" %>
<div class="container text-center">
  <div class="d-flex text-center mt-4">
    <div class="user-profile profile-page mx-3">
      <img src="https://res.cloudinary.com/dbe6henkk/image/upload/v1693559281/<%= current_user.picture %>" />
    </div>
    <div>
      <h3 class="m-3"><%= @user.first_name %></h3>
      <h3>ðŸŒŽ <%= @user.address %></h3>
    </div>
  </div>
  <h2 class="m-4 mt-5"><strong>Requests(My Sessions)</strong></h2>
  <% @requests.each do |request| %>
    <div class="request">
      <div class='request-left'>
        <div class="user-profile">
          <img src="https://res.cloudinary.com/dbe6henkk/image/upload/v1693559281/<%= request.user.picture %>" />
        </div>
        <div class="request-info">
          <div class="request-info-title">
            <%= request.user.first_name %>
          </div>
          <div class="request-info-details">
            <%= request.session.time.strftime('%l:%M %p') %>
          </div>
        </div>
      </div>
      <p><%= request.session.name %></p>
      <% if request.pending? %>
        <%= simple_form_for request do |f| %>
          <%= f.input :status, as: :hidden, input_html: { value: 'Accepted'} %>
          <%= f.submit 'Accept', class: 'btn btn-green' %>
        <% end %>
        <%= simple_form_for request do |f| %>
          <%= f.input :status, as: :hidden, input_html: { value: 'Rejected'} %>
          <%= f.submit 'Reject', class: 'btn btn-danger' %>
        <% end %>
      <% else %>
        <p class="request-tag"><%= request.status %></p>
      <% end %>
    </div>
  <% end %>
  <h2 class="m-4 mt-5"><strong>Submitted requests</strong></h2>
  <% @my_requests.each do |request| %>
    <p><%= request.session.name %> Status: <%= request.status %></p>
  <% end %>
  <h2 class="m-4 mt-5"><strong>My Subjects</strong></h2>
  <% @subjects.each do |subject| %>
    <div class="card bg-dark mt-3"></div>
    <div class="d-flex justify-content-between align-items-center p-2 subjects-card text-center text-white">
      <%= image_tag "https://res.cloudinary.com/ddfjqexgw/image/upload/v1693663058/icons/#{subject.icon_creator}", class:"icon-creator" %>
      <p class="name-subject-profile"><strong><%= subject.name %></strong></p>
      <div class="btn btn-danger"><p><strong>Remove</strong></p></div>
    </div>
    <div class="card bg-dark"></div>
  <% end %>
  <div class="button-container">
    <%= link_to "Edit your subjects", profilesubjects_path, class: "btn btn-primary m-3 edit-button", style: "background-color: #4e6cf0ef;" %>
  </div>
</div>
<%= render "shared/navbar_bottom" %>
